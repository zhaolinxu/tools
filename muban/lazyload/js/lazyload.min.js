!function(e){e.fn.lazyloading=function(t){var n={preyimg:"/load.gif",picpath:"data-original",container:e(window),loadfirst:!1,defaultHeightID:"lazyloadingHeight"},i=e.extend({},n,t||{});i.cache=[],e(this).each(function(){var t=this.nodeName.toLowerCase(),n=e(this).attr(i.picpath),r=i.preyimg,o=e("#"+i.defaultHeightID).val(),a={obj:e(this),tag:t,url:n,preyimg:r,defaultheight:o};i.cache.push(a)});var r=function(){e.each(i.cache,function(t,n){var i=n.obj,o=(n.tag,n.url),a=n.preyimg;if("undefined"!=typeof o){var s=i.parent(),l=null;l=1==s.is("a")?s:i;var u=i.attr("width")||i.css("width"),f=n.defaultheight||i.css("height"),c=i.attr("height");null!=c&&(f=c),null!=u&&u.indexOf("px")>-1&&u.replace("px",""),null!=f&&f.indexOf("px")>-1&&f.replace("px","");var d="<div class='.loading' style='text-align: left;position:relative;float:left;width:"+u+"px;",p=!0;d=d+"height:"+f+"px;",(null==c||""==c)&&(p=!1),i.css("position","relative"),d+="' ></div>",l.wrap(d),s=i.parent(),1==p?s.attr("lazyloading_hasheight","1"):s.attr("lazyloading_hasheight","0"),s.append("<img class='loadhiddenimg' width='0' height='0' style='display:none;' src='' />"),i.attr("src",a),i.removeAttr("width").removeAttr("height"),i.attr("width1",u).attr("height1",c),i.css("margin",f/2-25+"px auto auto "+(u/2-25)+"px"),e(".lazyloading").css("display","table")}})},a=function(){var t=parseInt(e(window).height())+parseInt(e(window).scrollTop()),n=parseInt(e(window).scrollTop());e.each(i.cache,function(e,i){var r=i.obj,a=(i.tag,i.url);if(r&&"undefined"!=typeof a){var u=parseInt(r.offset().top);if(u>=n&&t>=u&&r.attr("data-original")!=r.attr("src")){var f=r.siblings("img.loadhiddenimg");f.load(function(){var e=r.attr("width1"),t=r.attr("height1");r.attr("width",e).attr("height",t).removeAttr("width1").removeAttr("height1"),r.css("margin","0 auto"),"0"==r.parent().attr("lazyloading_hasheight")&&(1==r.parent().is("a")?r.parent().parent().css("height",""):r.parent().css("height","")),r.load(function(){1==r.parent().is("a")?r.parent().parent().css("height",r.height()):r.parent().css("height",r.height())}),r.css("opacity","0.2"),r.attr("src",f.attr("src")),r.animate({opacity:1}),""!=r.attr("alt")&&(r.attr("title",r.attr("alt")),r.attr("alt",""))}).error(function(){r.error(function(){r.css("margin","0 auto auto 0"),"0"==r.parent().attr("lazyloading_hasheight")&&(1==r.parent().is("a")?r.parent().parent().css("height",""):r.parent().css("height",""))}),r.attr("src",f.attr("src")),""!=r.attr("alt")&&(r.attr("title",r.attr("alt")),r.attr("alt",""))}),f.attr("src",a)}}})};r(),1==i.loadfirst&&a(),i.container.bind("scroll",a).bind("resize",a)}}(jQuery);